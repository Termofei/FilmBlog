{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<main>
  <div class="container">
    <!-- Search Bar (Optional) -->
    <form class="searchbar" method="get" action="{% url 'movie-list' %}">
      <input type="text" name="q" placeholder="Search movies..." value="{{ request.GET.q }}">
      <button type="submit">
        <i class="bi bi-search"></i>  <!-- Bootstrap search icon -->
      </button>
    </form>

    <!-- Movie List -->
    <div class="movie-list">
      {% for movie in movies %}
        <div class="movie-card">
          <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" class="movie-poster">
          <div class="movie-info">
            <h3>{{ movie.title }}</h3>
            <p>{{ movie.director }} â€¢ {{ movie.release_date|date:"Y" }}</p>
            <a href="{% url 'movie-detail' movie.id %}" class="btn btn-primary">Details</a>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Pagination (Simplified) -->
    {% if is_paginated %}
      <div class="pagination">
        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">
            &laquo; Previous
          </a>
        {% endif %}
        
        <span class="current">
          Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        </span>

        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">
            Next &raquo;
          </a>
        {% endif %}
      </div>
    {% endif %}
  </div>
</main>
{% endblock %}